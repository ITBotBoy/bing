{"ast":null,"code":"export default ((req, res) => {\n  let {\n    date = 0,\n    count = 0\n  } = req.query;\n  const {\n    imgArr\n  } = global;\n\n  if (date) {\n    count = new Date(date.slice(4), date.slice(2), 0).getDate();\n  }\n\n  let startIndex = imgArr.findIndex(({\n    date: d\n  }) => date === `${d}`);\n  startIndex < 0 && (startIndex = imgArr.length - 1); // console.log(startIndex - (count-1),'startIndex - (count-1))')\n\n  res.json({\n    data: [...imgArr.slice(Math.max(0, startIndex - (count - 1)), startIndex + 1)].reverse()\n  });\n});","map":{"version":3,"sources":["F:/bing/Bing/pages/api/list.js"],"names":["req","res","date","count","query","imgArr","global","Date","slice","getDate","startIndex","findIndex","d","length","json","data","Math","max","reverse"],"mappings":"AAAA,gBAAe,CAACA,GAAD,EAAMC,GAAN,KAAc;AAC3B,MAAI;AAAEC,IAAAA,IAAI,GAAG,CAAT;AAAWC,IAAAA,KAAK,GAAG;AAAnB,MAAyBH,GAAG,CAACI,KAAjC;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAaC,MAAnB;;AACA,MAAGJ,IAAH,EAAQ;AACJC,IAAAA,KAAK,GAAC,IAAII,IAAJ,CAASL,IAAI,CAACM,KAAL,CAAW,CAAX,CAAT,EAAwBN,IAAI,CAACM,KAAL,CAAW,CAAX,CAAxB,EAAuC,CAAvC,EAA0CC,OAA1C,EAAN;AACH;;AACC,MAAIC,UAAU,GAAGL,MAAM,CAACM,SAAP,CAAiB,CAAC;AAAET,IAAAA,IAAI,EAAEU;AAAR,GAAD,KAAiBV,IAAI,KAAM,GAAEU,CAAE,EAAhD,CAAjB;AACDF,EAAAA,UAAU,GAAG,CAAd,KAAqBA,UAAU,GAAGL,MAAM,CAACQ,MAAP,GAAc,CAAhD,EAP2B,CAQ3B;;AACAZ,EAAAA,GAAG,CAACa,IAAJ,CAAS;AACPC,IAAAA,IAAI,EAAE,CAAC,GAAGV,MAAM,CAACG,KAAP,CAAaQ,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYP,UAAU,IAAIP,KAAK,GAAC,CAAV,CAAtB,CAAb,EAAkDO,UAAU,GAAG,CAA/D,CAAJ,EAAuEQ,OAAvE;AADC,GAAT;AAGD,CAZD","sourcesContent":["export default (req, res) => {\n  let { date = 0,count = 0 } = req.query;\n  const { imgArr } = global;\n  if(date){\n      count=new Date(date.slice(4), date.slice(2), 0).getDate()\n  }\n    let startIndex = imgArr.findIndex(({ date: d }) => date === `${d}`);\n  (startIndex < 0) && (startIndex = imgArr.length-1);\n  // console.log(startIndex - (count-1),'startIndex - (count-1))')\n  res.json({\n    data: [...imgArr.slice(Math.max(0, startIndex - (count-1)), startIndex + 1)].reverse(),\n  })\n}\n"]},"metadata":{},"sourceType":"module"}