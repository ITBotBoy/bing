{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar _s = $RefreshSig$();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport axios from 'axios';\nimport { useState, useEffect, useRef } from 'react';\nimport react from 'react';\nimport '../styles/index.scss';\nimport moment from 'moment';\nimport Head from \"../components/Head\";\nimport DownDialog from \"../components/downDialog\";\nimport { Spin } from \"antd\";\n\nvar Page = /*#__PURE__*/function (_React$Component) {\n  _inherits(Page, _React$Component);\n\n  var _super = _createSuper(Page);\n\n  function Page() {\n    _classCallCheck(this, Page);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Page, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      likeFun();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return PageFun();\n    }\n  }]);\n\n  return Page;\n}(React.Component);\n\nexport { Page as default };\n\nfunction PageFun() {\n  _s();\n\n  var _useState = useState(false),\n      downDialogVisible = _useState[0],\n      setDownDialogVisible = _useState[1];\n\n  var _useState2 = useState([]),\n      list = _useState2[0],\n      updateList = _useState2[1];\n\n  var _useState3 = useState({}),\n      img = _useState3[0],\n      updateImg = _useState3[1];\n\n  var _useState4 = useState(0),\n      nextDate = _useState4[0],\n      updateNextDate = _useState4[1];\n\n  var _useState5 = useState(false),\n      loading = _useState5[0],\n      updateLoading = _useState5[1];\n\n  var _useState6 = useState(false),\n      isMobile = _useState6[0],\n      setIsMobile = _useState6[1];\n\n  var _useState7 = useState(false),\n      showTop = _useState7[0],\n      setShowTop = _useState7[1];\n\n  var _useState8 = useState(false),\n      isEmpty = _useState8[0],\n      setEmpty = _useState8[1];\n\n  var _useState9 = useState([]),\n      likeList = _useState9[0],\n      setLikeList = _useState9[1];\n\n  var checkMode = function checkMode() {\n    if (window.innerWidth < 1024 || window.innerWidth < window.innerHeight) {\n      setIsMobile(true);\n      return true;\n    }\n\n    setIsMobile(false);\n    return false;\n  };\n\n  var likeFun = function likeFun(data) {\n    var dataList = JSON.parse(window.localStorage.getItem('dataList') || '[]');\n\n    if (!likeList.length) {\n      setLikeList(dataList);\n    }\n\n    if (data && !dataList.includes(data)) {\n      dataList.push(data);\n      window.localStorage.setItem('dataList', JSON.stringify(dataList));\n    }\n  };\n\n  var downloadFun = function downloadFun() {};\n\n  var queryList = function queryList(nextDate, isMobile) {\n    updateLoading(true); // nextDate=String(nextDate).substr(0,6)\n\n    axios(\"/api/list?date=\".concat(nextDate, \"&count=28\")).then(function (_ref) {\n      var data = _ref.data;\n      var count = 0;\n      var maxCount = isMobile ? 0 : 2;\n      data.data.forEach(function (item, i) {\n        var span = 1; //0 1 2\n\n        count < maxCount && maxCount && (span = Math.ceil(Math.random() * 2)); // 10-i,第8张换span  8 16 24\n\n        !(i % 12) && maxCount && (span = 2);\n        console.log(maxCount, span, isMobile);\n        span === 2 && (count += 1);\n        item.style = {\n          gridColumnStart: \"span \".concat(span),\n          gridRowStart: \"span \".concat(span)\n        };\n        item.dateStr = moment(item.date, 'YYYYMMDD').format('YY.MM.DD');\n        item.span = span;\n      });\n      var last = data.data.last();\n      updateList([].concat(_toConsumableArray(list), _toConsumableArray(data.data)));\n      !last.prev && setEmpty(true);\n      updateNextDate(last.prev);\n      updateLoading(false);\n    });\n  };\n\n  var $page = useRef();\n  useEffect(function (e) {\n    window.onscroll = function () {\n      if (loading || isEmpty) {\n        return;\n      }\n\n      setShowTop(document.documentElement.scrollTop > 700);\n\n      if (document.documentElement.clientHeight + document.documentElement.scrollTop + 50 > $page.current.clientHeight) {\n        queryList(nextDate, isMobile);\n      }\n    };\n\n    setTimeout(function () {\n      window.onscroll();\n    });\n  }, [nextDate, loading]);\n  useEffect(function () {\n    var isMobile = checkMode();\n\n    Array.prototype.last = function () {\n      return this[this.length - 1];\n    };\n\n    queryList(nextDate, isMobile);\n  }, []);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"index-page \".concat(isMobile && 'mobile-page'),\n    ref: $page,\n    children: [/*#__PURE__*/_jsx(Head, {}), /*#__PURE__*/_jsx(\"div\", {\n      className: \"img-list\",\n      style: {\n        gridTemplateRows: isMobile ? \"repeat(\".concat(list.length, \", 75vw)\") : \"repeat(\".concat(Math.ceil(list.length / 28) * 4, \", 19vw)\")\n      },\n      children: list.map(function (img) {\n        return /*#__PURE__*/_jsxs(\"div\", {\n          className: \"img-item\",\n          style: img.style,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"cover\",\n            children: [/*#__PURE__*/_jsx(\"a\", {\n              className: \"iconfont icon-fangda actionBtn\",\n              href: \"/\".concat(img.date)\n            }), /*#__PURE__*/_jsx(\"span\", {\n              className: \"text\",\n              children: img.cp\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"date-str size-\".concat(img.span),\n            children: img.dateStr\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"img-bg\",\n            style: {\n              backgroundImage: \"url('//cn.bing.com\".concat(img.urlbase, \"_\").concat(false ? '768x1280' : '1024x768', \".jpg')\")\n            }\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"handleButton\",\n            children: [/*#__PURE__*/_jsx(\"span\", {\n              className: \"iconfont icon-xihuan\"\n            }), /*#__PURE__*/_jsx(\"span\", {\n              onClick: function onClick() {\n                setDownDialogVisible(true);\n                updateImg(img);\n              },\n              className: \"iconfont icon-download\"\n            })]\n          })]\n        }, img.date);\n      })\n    }), isEmpty && /*#__PURE__*/_jsx(\"div\", {\n      className: \"empty-text\",\n      children: \"\\u2014\\u2014 \\u5230\\u5E95\\u5566 \\u2014\\u2014\"\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"right-btn\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"to-top iconfont icon-arrow-left \".concat(!showTop && 'hide'),\n        onClick: function onClick() {\n          return window.scrollTo(0, 0);\n        }\n      }), /*#__PURE__*/_jsx(\"a\", {\n        className: \"iconfont icon-touzi\",\n        href: \"/random\"\n      })]\n    }), /*#__PURE__*/_jsx(DownDialog, {\n      isMobile: isMobile,\n      visible: downDialogVisible,\n      onHide: function onHide() {\n        setDownDialogVisible(false);\n        updateImg({});\n      },\n      imgInfo: img\n    })]\n  });\n}\n\n_s(PageFun, \"1LIHPfrWY+wbp7H7bsB4mb9mpJs=\");\n\n_c = PageFun;\n\nvar _c;\n\n$RefreshReg$(_c, \"PageFun\");","map":{"version":3,"sources":["F:/bing/Bing/pages/index.js"],"names":["axios","useState","useEffect","useRef","react","moment","Head","DownDialog","Spin","Page","likeFun","PageFun","React","Component","downDialogVisible","setDownDialogVisible","list","updateList","img","updateImg","nextDate","updateNextDate","loading","updateLoading","isMobile","setIsMobile","showTop","setShowTop","isEmpty","setEmpty","likeList","setLikeList","checkMode","window","innerWidth","innerHeight","data","dataList","JSON","parse","localStorage","getItem","length","includes","push","setItem","stringify","downloadFun","queryList","then","count","maxCount","forEach","item","i","span","Math","ceil","random","console","log","style","gridColumnStart","gridRowStart","dateStr","date","format","last","prev","$page","e","onscroll","document","documentElement","scrollTop","clientHeight","current","setTimeout","Array","prototype","gridTemplateRows","map","cp","backgroundImage","urlbase","scrollTo"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {useState, useEffect, useRef} from 'react';\nimport react from 'react'\nimport '../styles/index.scss';\nimport moment from 'moment';\nimport Head from \"../components/Head\";\nimport DownDialog from \"../components/downDialog\";\nimport {Spin} from \"antd\";\nexport default class Page extends React.Component {\n    componentDidMount () {\n        likeFun()\n    }\n    render (){\n        return PageFun()\n    }\n}\nfunction PageFun() {\n    const [downDialogVisible, setDownDialogVisible] = useState(false);\n    const [list, updateList] = useState([]);\n    const [img, updateImg] = useState({});\n    const [nextDate, updateNextDate] = useState(0);\n    const [loading, updateLoading] = useState(false);\n    const [isMobile, setIsMobile] = useState(false);\n    const [showTop, setShowTop] = useState(false);\n    const [isEmpty, setEmpty] = useState(false);\n    const [likeList, setLikeList] = useState([]);\n    const checkMode = () => {\n        if (window.innerWidth < 1024 || window.innerWidth < window.innerHeight) {\n            setIsMobile(true);\n            return true;\n        }\n        setIsMobile(false)\n        return false;\n    }\n\n    const likeFun = (data) => {\n        const dataList=JSON.parse(window.localStorage.getItem('dataList') || '[]')\n        if(!likeList.length){\n            setLikeList(dataList)\n        }\n        if(data && !dataList.includes(data)){\n            dataList.push(data)\n            window.localStorage.setItem('dataList',JSON.stringify(dataList))\n        }\n    }\n\n    const downloadFun = () => {\n\n    }\n    const queryList = (nextDate, isMobile) => {\n        updateLoading(true);\n        // nextDate=String(nextDate).substr(0,6)\n        axios(`/api/list?date=${nextDate}&count=28`)\n            .then(({data}) => {\n                let count = 0;\n                const maxCount = isMobile ? 0 : 2;\n                data.data.forEach((item, i) => {\n                    let span = 1;\n                    //0 1 2\n                    (count < maxCount) && maxCount && (span = Math.ceil(Math.random() * 2));\n                    // 10-i,第8张换span  8 16 24\n                    !(i%12) && maxCount && (span = 2);\n\n                    console.log(maxCount, span, isMobile);\n                    span === 2 && (count += 1);\n                    item.style = {\n                        gridColumnStart: `span ${span}`,\n                        gridRowStart: `span ${span}`,\n                    }\n                    item.dateStr = moment(item.date, 'YYYYMMDD').format('YY.MM.DD');\n                    item.span = span;\n                })\n                const last = data.data.last()\n                updateList([...list, ...data.data]);\n                !last.prev && setEmpty(true);\n                updateNextDate(last.prev);\n                updateLoading(false);\n\n            })\n    }\n\n    const $page = useRef();\n\n    useEffect((e) => {\n        window.onscroll = () => {\n            if (loading || isEmpty) {\n                return;\n            }\n            setShowTop(document.documentElement.scrollTop > 700);\n            if (document.documentElement.clientHeight + document.documentElement.scrollTop + 50 > $page.current.clientHeight) {\n                queryList(nextDate, isMobile);\n            }\n        }\n        setTimeout(() => {\n            window.onscroll();\n        })\n    }, [nextDate, loading]);\n\n    useEffect(() => {\n        const isMobile = checkMode();\n        Array.prototype.last = function () {\n            return this[this.length - 1];\n        }\n\n        queryList(nextDate, isMobile)\n    }, [])\n    return (\n\n        <div className={`index-page ${isMobile && 'mobile-page'}`} ref={$page}>\n            <Head></Head>\n            <div className=\"img-list\"\n                 style={{\n                     gridTemplateRows: isMobile ? `repeat(${list.length}, 75vw)` : `repeat(${Math.ceil(list.length / 28) * 4}, 19vw)`\n                 }}>\n                {\n                    list.map((img) => (\n                        <div\n                            className=\"img-item\"\n                            style={img.style}\n                            key={img.date}\n                        >\n                            <div className=\"cover\">\n                                <a className=\"iconfont icon-fangda actionBtn\" href={`/${img.date}`}/>\n                                <span className=\"text\">{img.cp}</span>\n                            </div>\n                            <div className={`date-str size-${img.span}`}>{img.dateStr}</div>\n                            <div className=\"img-bg\"\n                                 style={{backgroundImage: `url('//cn.bing.com${img.urlbase}_${false ? '768x1280' : '1024x768'}.jpg')`}}/>\n                             <div className=\"handleButton\">\n                                 <span className=\"iconfont icon-xihuan\"></span>\n                                 <span  onClick={() => {setDownDialogVisible(true);updateImg(img);}} className=\"iconfont icon-download\"></span>\n                             </div>\n                        </div>\n                    ))\n                }\n            </div>\n            {isEmpty && <div className=\"empty-text\">—— 到底啦 ——</div>}\n            <div className=\"right-btn\">\n                <div className={`to-top iconfont icon-arrow-left ${!showTop && 'hide'}`}\n                     onClick={() => window.scrollTo(0, 0)}/>\n                <a className=\"iconfont icon-touzi\" href='/random'/>\n            </div>\n            <DownDialog isMobile={isMobile} visible={downDialogVisible} onHide={() => {setDownDialogVisible(false);updateImg({});}}\n                        imgInfo={img}/>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}