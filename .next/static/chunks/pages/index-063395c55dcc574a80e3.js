_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{RNiq:function(t,e,n){"use strict";n.r(e);var a=n("KQm4"),c=n("nKUr"),o=n("vDqi"),i=n.n(o),s=n("q1tI"),l=(n("Gpft"),n("wd/R")),d=n.n(l),r=n("2pyn"),u=n("9+Bb"),j=n("DzJC"),b=n.n(j);e.default=function(){var t=Object(s.useState)(!1),e=t[0],n=t[1],o=Object(s.useState)([]),l=o[0],j=o[1],f=Object(s.useState)({}),m=f[0],p=f[1],w=Object(s.useState)(0),h=w[0],O=w[1],v=Object(s.useState)(!1),g=v[0],N=v[1],x=Object(s.useState)(!1),S=x[0],k=x[1],C=Object(s.useState)(!1),_=C[0],E=C[1],y=Object(s.useState)(!1),D=y[0],R=y[1],M=Object(s.useState)({}),I=M[0],J=M[1],T=Object(s.useState)([]),Y=T[0],q=T[1],H=function(t){var e=window.localStorage.getItem("localLikeList");!Y.length&&e&&q(JSON.parse(e)),t&&((e=e?JSON.parse(e):[]).includes(t)||i()("/api/sort?date=".concat(t,"&k=likeCount")).then((function(n){n.data.likeCount&&(I[t]||(I[t]={likeCount:0}),I[t].likeCount=n.data.likeCount,J(I),e.push(t),q(e),window.localStorage.setItem("localLikeList",JSON.stringify(e)))})))},L=b()((function(t){return H(t)}),1500);window&&H();var z=function(t,e){N(!0),i()("/api/list?date=".concat(t,"&count=10")).then((function(t){var n=t.data,c=0,o=e?0:2;n.data.forEach((function(t,e){var n=1;c<o&&o&&(n=Math.ceil(2*Math.random())),o-c===10-e&&o&&(n=2),2===n&&(c+=1),t.style={gridColumnStart:"span ".concat(n),gridRowStart:"span ".concat(n)},t.dateStr=d()(t.date,"YYYYMMDD").format("YY.MM.DD"),t.span=n}));var i=n.data.last();j([].concat(Object(a.a)(l),Object(a.a)(n.data))),!i.prev&&R(!0),O(i.prev),N(!1)}))},B=Object(s.useRef)();return Object(s.useEffect)((function(t){window.onscroll=b()((function(){if(!g&&!D){E(document.documentElement.scrollTop>700);var t=document.documentElement.scrollTop,e=document.documentElement.clientHeight,n=B.current.clientHeight;t&&e+t+150>n&&z(h,S)}}),100),window.onscroll()}),[h,g]),Object(s.useEffect)((function(){var t=window.innerWidth<1024||window.innerWidth<window.innerHeight?(k(!0),!0):(k(!1),!1);Array.prototype.last=function(){return this[this.length-1]},i()("/api/sort").then((function(t){J(t.data)})),z(h,t)}),[]),Object(c.jsxs)("div",{className:"index-page ".concat(S&&"mobile-page"),ref:B,children:[Object(c.jsx)(r.a,{}),Object(c.jsx)("div",{className:"img-list",style:{gridTemplateRows:S?"repeat(".concat(l.length,", 75vw)"):"repeat(".concat(4*parseInt(l.length/10),", 19vw)")},children:l.map((function(t){return Object(c.jsxs)("div",{className:"img-item",style:t.style,children:[Object(c.jsxs)("div",{className:"cover",children:[Object(c.jsx)("a",{className:"iconfont icon-fangda actionBtn",href:"/".concat(t.date)}),Object(c.jsx)("span",{className:"text",children:t.cp})]}),Object(c.jsx)("div",{className:"date-str size-".concat(t.span),children:t.dateStr}),Object(c.jsx)("div",{className:"img-bg",style:{backgroundImage:"url('//cn.bing.com".concat(t.urlbase,"_").concat("1024x768",".jpg')")}}),Object(c.jsxs)("div",{className:"handleButton",children:[Object(c.jsx)("span",{className:(Y.includes(t.date)?"icon-like-fill":"icon-xihuan")+" iconfont",onClick:function(){L(t.date)},children:Object(c.jsx)("span",{className:"count",children:I[t.date]&&I[t.date].likeCount||0})}),Object(c.jsx)("span",{onClick:function(){n(!0),p(t)},className:"iconfont icon-download",children:Object(c.jsx)("span",{className:"count",children:I[t.date]&&I[t.date].downloadCount||0})})]})]},t.date)}))}),D&&Object(c.jsx)("div",{className:"empty-text",children:"\u2014\u2014 \u5230\u5e95\u5566 \u2014\u2014"}),Object(c.jsxs)("div",{className:"right-btn",children:[Object(c.jsx)("div",{className:"to-top iconfont icon-arrow-left ".concat(!_&&"hide"),onClick:function(){return window.scrollTo(0,0)}}),Object(c.jsx)("a",{className:"iconfont icon-touzi",href:"/random"})]}),Object(c.jsx)(u.a,{downloadFun:function(t){t&&i()("/api/sort?date=".concat(t,"&k=downloadCount")).then((function(e){e.data.likeCount&&(I[t]||(I[t]={downloadCount:0}),I[t].downloadCount=e.data.downloadCount,J(I))}))},isMobile:S,visible:e,onHide:function(){n(!1),p({})},imgInfo:m})]})}},vlRD:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("RNiq")}])}},[["vlRD",0,2,6,1,5,4]]]);